import{d as p,a as C,o as a,c as d,m as r,w as l,j as _,t as f,J as h,K as g,h as u,k as m,a9 as y,f as v,q as k,ap as $,b as S,e as x,G as b,x as w,p as A}from"./CMcu4vOi.js";import{e as H}from"./B5y2QTf5.js";import{c as B}from"./Cy5WKwqU.js";import"./weTs8tLg.js";import"./CziPTEgh.js";import"./BwHuf7fG.js";import"./VKdB9Mfh.js";import"./DDd3r5-x.js";import"./Brx9_43Z.js";import"./sfWYJY5J.js";const N={key:0,flex:"","flex-col":"","gap-2":""},T={flex:"","gap-2":"","text-sm":"","text-secondary":"","font-bold":""},P={"me-1":""},V=p({__name:"ConversationCard",props:{conversation:{}},setup(i){const e=C(()=>i.conversation.accounts.filter(t=>t.id!==i.conversation.lastStatus?.account.id));return(t,c)=>{const n=y,o=H;return t.conversation.lastStatus?(a(),d("article",N,[t.conversation.lastStatus?(a(),r(o,{key:0,status:t.conversation.lastStatus,actions:!1},{meta:l(()=>[_("div",T,[_("p",P,f(t.$t("conversation.with")),1),(a(!0),d(h,null,g(u(e),s=>(a(),r(n,{key:s.id,"h-5":"","w-5":"",account:s},null,8,["account"]))),128))])]),_:1},8,["status"])):m("",!0)])):m("",!0)}}}),L=p({__name:"ConversationPaginator",props:{paginator:{}},setup(i){function e(t){const c=n=>n.lastStatus?n.lastStatus.account.id===k.value?.account.id:!1;return t.filter(n=>c(n)||!n.lastStatus?.filtered?.find(o=>o.filter.filterAction==="hide"&&o.filter.context.includes("thread")))}return(t,c)=>{const n=V,o=B;return a(),r(o,{paginator:t.paginator,preprocess:e},{default:l(({item:s})=>[v(n,{conversation:s,border:"b base","py-1":""},null,8,["conversation"])]),_:1},8,["paginator"])}}}),M=p({__name:"TimelineConversations",setup(i){const e=$().v1.conversations.list();return(t,c)=>{const n=L;return a(),r(n,{paginator:u(e)},null,8,["paginator"])}}}),j=_("div",{"i-ri:at-line":""},null,-1),O=p({__name:"conversations",setup(i){const{t:e}=S();return x({title:()=>e("nav.conversations")}),(t,c)=>{const n=A,o=M,s=b;return a(),r(s,null,{title:l(()=>[v(n,{to:"/conversations","timeline-title-style":"",flex:"","items-center":"","gap-2":"",onClick:t.$scrollToTop},{default:l(()=>[j,_("span",null,f(u(e)("nav.conversations")),1)]),_:1},8,["onClick"])]),default:l(()=>[("isHydrated"in t?t.isHydrated:u(w))?(a(),r(o,{key:0})):m("",!0)]),_:1})}}});export{O as default};
