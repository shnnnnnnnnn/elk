import{b as g,ba as d,aj as f,v,c7 as p}from"./CMcu4vOi.js";const i=["ar","az","cs","da","de","el","en","eo","es","fa","fi","fr","ga","he","hi","hu","id","it","ja","ko","nl","pl","pt","ru","sk","sv","tr","uk","vi","zh"];function x(){let e="en";const n=a=>a.replace(/-.*$/,"");{const{locale:a}=g();e=n(a.value?a.value:navigator.language)}return e}async function h(e,n,a){const l=p(),r=v({success:!1,error:"",text:""}),o=/<a[^>]*>.*?<\/a>/g;try{const s=await $fetch(l.public.translateApi,{method:"POST",body:{q:e,source:n??"auto",target:a,format:"html",api_key:""}});r.value.success=!0,r.value.text=s.translatedText.replace(o,t=>{const u=o.exec(e);return u?u[0]:t})}catch(s){s.data?.error?r.value.error=s.data.error:r.value.error="Unknown Error, Please check your console in browser devtool.",console.error("Translate Post Error: ",s)}return r}const c=new WeakMap;function k(e,n){c.has(e)||c.set(e,d({visible:!1,text:"",success:!1,error:""}));const a=c.get(e),l=f(),r="language"in e&&e.language&&e.language!==n&&i.includes(n)&&i.includes(e.language)&&!l.value.disabledTranslationLanguages.includes(e.language),o=r;async function s(){if(r){if(!a.text){const t=await h(e.content,e.language,n);a.error=t.value.error,a.text=t.value.text,a.success=t.value.success}a.visible=!a.visible}}return{enabled:o,toggle:s,translation:a}}export{x as g,i as s,k as u};
